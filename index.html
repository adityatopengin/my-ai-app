<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Stock Market AI Predictor</title>
    
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>

    <style>
        .console-container {
            margin-top: 20px;
            background-color: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            height: 250px;
            overflow-y: auto;
            border: 2px solid #333;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }
        .console-line { margin-bottom: 5px; border-bottom: 1px solid #333; padding-bottom: 5px; word-wrap: break-word;}
        .console-error { color: #ff5555; }
        .console-title { font-size: 0.9rem; color: #888; margin-bottom: 5px; text-transform: uppercase; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>NSE/BSE AI Predictor</h1>
        <p class="subtitle">Powered by an LSTM Neural Network</p>

        <div class="input-group">
            <label for="ticker">Enter Indian Stock Ticker:</label>
            <input type="text" id="ticker" value="RELIANCE.NSE" placeholder="e.g., TCS.BOM, ^NSEI">
        </div>

        <button id="predict-btn">Run AI Prediction</button>
        
        <div class="status-panel">
            <p>Status: <span id="status">Ready</span></p>
            <div id="output" class="result">Waiting to start analysis...</div>
        </div>

        <div class="console-title" style="margin-top: 30px;">Live API & Error Console</div>
        <div id="custom-console" class="console-container">
            <div class="console-line" style="color: #aaa;">[SYSTEM]: Console initialized. Waiting for data...</div>
        </div>
    </div>

    <script>
        const consoleDiv = document.getElementById('custom-console');
        
        // Helper function to convert objects (like JSON from APIs) into readable text
        function formatOutput(args) {
            return args.map(arg => typeof arg === 'object' ? JSON.stringify(arg, null, 2) : arg).join(' ');
        }

        // 1. Hijack standard console.log
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            consoleDiv.innerHTML += `<div class="console-line">[LOG]: ${formatOutput(args)}</div>`;
            consoleDiv.scrollTop = consoleDiv.scrollHeight; // Auto-scroll to bottom
        };

        // 2. Hijack standard console.error
        const originalError = console.error;
        console.error = function(...args) {
            originalError.apply(console, args);
            consoleDiv.innerHTML += `<div class="console-line console-error">[ERROR]: ${formatOutput(args)}</div>`;
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        };

        // 3. Catch critical page crashes
        window.onerror = function(msg, url, line) {
            consoleDiv.innerHTML += `<div class="console-line console-error">[CRASH]: ${msg} (Line: ${line})</div>`;
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
            return false;
        };
    </script>

    <script type="module" src="js/main.js"></script>
</body>
</html>
